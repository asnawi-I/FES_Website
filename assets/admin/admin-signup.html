<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Sign Up - First Emporium</title>
    <style>

/* temp css */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    padding: 40px 20px;
    background: #ffffff;
}

.container {
    max-width: 500px;
    margin: 0 auto;
    border: 2px solid #000;
    padding: 30px;
}

h1 {
    font-size: 24px;
    margin-bottom: 5px;
    color: #000;
}

.subtitle {
    font-size: 14px;
    color: #666;
    margin-bottom: 30px;
}

.form-group {
    margin-bottom: 20px;
}

label {
    display: block;
    margin-bottom: 5px;
    font-size: 14px;
    color: #000;
}

input[type="text"],
input[type="email"],
input[type="tel"],
input[type="password"] {
    width: 100%;
    padding: 10px;
    border: 1px solid #000;
    background: #fff;
    font-size: 14px;
}

.checkbox-group {
    display: flex;
    gap: 10px;
}

.checkbox-group label {
    margin-bottom: 0;
}

button {
    width: 100%;
    padding: 12px;
    background: #000;
    color: #fff;
    border: 2px solid #000;
    font-size: 16px;
    cursor: pointer;
}

button:hover {
    background: #333;
}

button:disabled {
    background: #ccc;
    border-color: #ccc;
    cursor: not-allowed;
}

.error-message,
.success-message {
    padding: 12px;
    border: 2px solid #000;
    margin-bottom: 20px;
    display: none;
}

.error-message {
    background: #fff;
}

.success-message {
    background: #fff;
}

.show {
    display: block;
}

.required {
    color: #000;
}

.login-link {
    text-align: center;
    margin-top: 20px;
    font-size: 14px;
}

a {
    color: #000;
    text-decoration: underline;
}

small {
    font-size: 12px;
    color: #666;
}
    </style>
</head>
<body>
    <div class="container">
        <h1>First Emporium Admin</h1>
        <p class="subtitle">Register for Admin Access</p>

        <!-- error message -->
        <div id="errorMessage" class="error-message">
            This email is already registered. Please use a different email.
        </div>

        <!-- success message -->
        <div id="successMessage" class="success-message">
            Your registration has been submitted and your account is pending for approval. Please contact support for more information.
        </div>

        <!-- sign up form -->
        <form id="adminSignUpForm">
            <!-- fullname -->
            <div class="form-group">
                <label for="fullName">Full Name <span class="required">*</span></label>
                <input 
                    type="text" 
                    id="fullName" 
                    name="fullName" 
                    placeholder="Enter your full name"
                    required
                >
            </div>


            <!-- username -->
            <div class="form-group">
                <label for="username">Username <span class="required">*</span></label>
                <input 
                    type="text" 
                    id="username" 
                    name="username" 
                    placeholder="Enter your username"
                    required
                >
            </div>

            <!-- username/email -->
            <div class="form-group">
                <label for="email">Email <span class="required">*</span></label>
                <input 
                    type="email" 
                    id="email" 
                    name="email" 
                    placeholder="Enter your email address"
                    required
                >
            </div>

            <!-- work id -->
            <div class="form-group">
                <label for="workId">Work ID <span class="required">*</span></label>
                <input 
                    type="text" 
                    id="workId" 
                    name="workId" 
                    placeholder="Enter your work ID"
                    required
                >
            </div>

            <!-- phone no. -->
            <div class="form-group">
                <label for="phoneNumber">Phone Number <span class="required">*</span></label>
                <input 
                    type="tel" 
                    id="phoneNumber" 
                    name="phoneNumber" 
                    placeholder="+673 1234567"
                    required
                >
            </div>

            <!-- password -->
            <div class="form-group">
                <label for="password">Password <span class="required">*</span></label>
                <input 
                    type="password" 
                    id="password" 
                    name="password" 
                    placeholder="Enter your password"
                    required
                    minlength="8"
                    pattern="^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,}$"
                    title="Password must contain at least 8 characters, one number, and one special character"
                >
                <small style="color: #666;">Minimum 8 characters, one number, one special character (!@#$%^&*)</small>

                <!-- Password Strength Indicator -->
                <div id="passwordStrength" style="margin-top: 5px; font-size: 12px; display: none;">
                    <div style="margin-bottom: 3px;">Password strength:</div>
                    <div style="display: flex; gap: 3px;">
                        <div id="strength1" style="height: 5px; width: 33%; background: #ddd;"></div>
                        <div id="strength2" style="height: 5px; width: 33%; background: #ddd;"></div>
                        <div id="strength3" style="height: 5px; width: 33%; background: #ddd;"></div>
                    </div>
                    <div id="strengthText" style="margin-top: 3px; color: #666;"></div>
                </div>
            </div>


            <!-- rednter password -->
            <div class="form-group">
                <label for="confirmPassword">Re-enter Password <span class="required">*</span></label>
                <input 
                    type="password" 
                    id="confirmPassword" 
                    name="confirmPassword" 
                    placeholder="Re-enter your password"
                    required
                    minlength="8"
                >
            </div>

            <!-- privacy and t&c -->
            <div class="form-group">
                <div class="checkbox-group">
                    <input 
                        type="checkbox" 
                        id="agreeTerms" 
                        name="agreeTerms" 
                        required
                    >
                    <label for="agreeTerms">
                        I agree to the <a href="#" target="_blank">Privacy Policy</a> and <a href="#" target="_blank">Terms and Conditions</a> <span class="required">*</span>
                    </label>
                </div>
            </div>

            <!-- account submit registration -->
            <button type="submit" id="registerBtn">
                Register
            </button>
        </form>

        <!-- login -->
        <div class="login-link">
            <p>Already have an account? <a href="admin-login.html">Login here</a></p>
        </div>
    </div>

    <script>
        // Get form and elements
        const form = document.getElementById('adminSignUpForm');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        const registerBtn = document.getElementById('registerBtn');

        // Validate password strength
        function validatePassword(password) {
            const minLength = 8;
            const hasNumber = /[0-9]/.test(password);
            const hasSpecialChar = /[!@#$%^&*]/.test(password);
            
            const errors = [];
            
            if (password.length < minLength) {
                errors.push(`at least ${minLength} characters`);
            }
            if (!hasNumber) {
                errors.push('at least one number');
            }
            if (!hasSpecialChar) {
                errors.push('at least one special character (!@#$%^&*)');
            }
            
            return {
                isValid: errors.length === 0,
                errors: errors
            };
        }

        // Real-time password strength indicator
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            const indicator = document.getElementById('passwordStrength');
            const strength1 = document.getElementById('strength1');
            const strength2 = document.getElementById('strength2');
            const strength3 = document.getElementById('strength3');
            const strengthText = document.getElementById('strengthText');
            
            if (password.length === 0) {
                indicator.style.display = 'none';
                return;
            }
            
            indicator.style.display = 'block';
            
            const hasLength = password.length >= 8;
            const hasNumber = /[0-9]/.test(password);
            const hasSpecial = /[!@#$%^&*]/.test(password);
            
            let strength = 0;
            if (hasLength) strength++;
            if (hasNumber) strength++;
            if (hasSpecial) strength++;
            
            // Reset all bars
            strength1.style.background = '#ddd';
            strength2.style.background = '#ddd';
            strength3.style.background = '#ddd';
            
            if (strength === 1) {
                strength1.style.background = '#EA3B52'; // Red
                strengthText.textContent = 'Weak';
                strengthText.style.color = '#EA3B52';
            } else if (strength === 2) {
                strength1.style.background = '#FFA500'; // Orange
                strength2.style.background = '#FFA500';
                strengthText.textContent = 'Medium';
                strengthText.style.color = '#FFA500';
            } else if (strength === 3) {
                strength1.style.background = '#86BE4E'; // Green
                strength2.style.background = '#86BE4E';
                strength3.style.background = '#86BE4E';
                strengthText.textContent = 'Strong';
                strengthText.style.color = '#86BE4E';
            }
        });

        // Handle form submission
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            // Hide all messages
            errorMessage.classList.remove('show');
            successMessage.classList.remove('show');

            // Get form values
            const fullName = document.getElementById('fullName').value.trim();
            const email = document.getElementById('email').value.trim();
            const workId = document.getElementById('workId').value.trim();
            const phoneNumber = document.getElementById('phoneNumber').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;

            // Validation
            if (!fullName || !email || !workId || !phoneNumber || !password || !confirmPassword) {
                alert('Please fill in all required fields.');
                return;
            }

            // Check if passwords match
            if (password !== confirmPassword) {
                alert('Passwords do not match. Please try again.');
                document.getElementById('confirmPassword').value = '';
                document.getElementById('confirmPassword').focus();
                return;
            }

            // Validate password strength
            const passwordValidation = validatePassword(password);
            if (!passwordValidation.isValid) {
                alert('Password must contain: ' + passwordValidation.errors.join(', ') + '.');
                return;
            }

            // Check if terms agreed
            if (!agreeTerms) {
                alert('You must agree to the Privacy Policy and Terms and Conditions.');
                return;
            }

            // Check if email is already registered (SIMULATED - replace with actual backend check)
            if (checkEmailExists(email)) {
                errorMessage.classList.add('show');
                document.getElementById('email').focus();
                return;
            }

            // If all validations pass, submit registration
            submitRegistration({
                fullName,
                email,
                workId,
                phoneNumber,
                password
            });
        });

        // SIMULATED: Check if email already exists
        function checkEmailExists(email) {
            // Replace this with actual API call to check database
            const existingEmails = ['admin@firstemporium.com', 'test@example.com'];
            return existingEmails.includes(email.toLowerCase());
        }

        // SIMULATED: Submit registration to backend
        function submitRegistration(data) {
            console.log('Registration data:', data);

            // Disable submit button
            registerBtn.disabled = true;
            registerBtn.textContent = 'Submitting...';

            // SIMULATED: Backend API call
            setTimeout(() => {
                // Show success message
                successMessage.classList.add('show');
                
                // Reset form
                form.reset();
                
                // Re-enable button
                registerBtn.disabled = false;
                registerBtn.textContent = 'Register';

                // Scroll to top to show message
                window.scrollTo({ top: 0, behavior: 'smooth' });

                // TODO: Replace with actual backend implementation
                // 1. Send POST request to /api/admin/register
                // 2. Backend creates pending admin record in database
                // 3. Backend sends notification to Super Admin
                // 4. Backend sends confirmation email to registrant
                // 5. Show success message
                // 6. Optionally redirect to login page after delay

            }, 1500); // Simulate network delay
        }

        // Real-time password match validation
        document.getElementById('confirmPassword').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;

            if (confirmPassword && password !== confirmPassword) {
                this.setCustomValidity('Passwords do not match');
            } else {
                this.setCustomValidity('');
            }
        });

        // Phone number formatting for Brunei
        document.getElementById('phoneNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, ''); // Remove non-digits
            
            // Format as Brunei phone number
            if (value.startsWith('673')) {
                if (value.length > 3) {
                    value = '+673 ' + value.substring(3);
                } else {
                    value = '+673';
                }
            } else if (value.length > 0) {
                value = '+673 ' + value;
            }
            
            e.target.value = value;
        });
    </script>
</body>
</html>